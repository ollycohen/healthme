{% include "navbar/navbar.html"%} {% load materializecss %} {% load static %}

<h2 class="center">Macronutrient Analysis</h2>

<!-- use context to generate data at request-->

<div class="contaner">
  <div class="row">
    <div class="col s6" id="macro-by-day">
      <h5 class="center">Macronutrient Breakdown by Day</h5>
      <div id="chart1" class="chart_id chart-class"></div>
    </div>
    <div class="col s6" id="macro-average">
      <h5 class="center">Average Macronutrient Breakdown</h5>
      <div id="chart2" class="chart_id chart-class"></div>
    </div>
  </div>
  <div class="row" id="strength-graph-div">
      <div class="col s6" id="strength-graph">
        <h5 class="center">Strength Progress Over Time</h5>
        <div id="chart" class="chart_id chart-class"></div>
      </div>
  </div>
</div>

<!-- req workouts, nutrition, cardio + display their components-->

<script type="text/javascript">
          // parsing meal data
          var mealData = [];
          var workoutData = [];
          var weightData = [];

          {% for meal in meals %}
            mealData.push({
              "calories": "{{  meal.calories  }}",
              "protein_grams": "{{  meal.grams_of_protein  }}",
              "fat_grams": "{{  meal.grams_of_fat  }}",
              "carb_grams": "{{  meal.grams_of_carbs  }}",
              "date":"{{  meal.date  }}"
            })
          {% endfor %}

          {% for workout in workouts %}
            workoutData.push({
              "exercise_name": "{{  workout.exercise_name  }}",
              "sets": "{{  workout.sets  }}",
              "reps": "{{  workout.reps  }}",
              "weight": "{{  workout.weight  }}",
              "sets_succesful": "{{  workout.sets_successful  }}",
              "date": "{{  workout.date  }}"
            })
          {% endfor %}

          {% for weight in weights %}
            weightData.push({
              "weight": "{{ weight.weight_entry }}",
              "date": "{{ weight.date }}"
            })
          {% endfor %}

          
          generateMealGraphs(mealData);
          generateWorkoutGraphs(workoutData);
</script>
